## DNS（Domain Name System）

将网址映射到IP的方式

* 层次命名：
  * 如www.baidu.com，.com是顶级域名，baidu 是二级域名,www是三级域名
  * 顶级域名包括com,cn,gov等，二级域名包括edu,cctv等
* 域名服务器
  * 用于记录某个域名映射到哪个IP，分布式设计，每个服务器都有DNS映射
  * 根域名服务器：任何域名服务器无法解析的时候会询问根域名服务器。根域名服务器一般会指导它去哪里找网址顶级域名的服务器位置
  * 顶级域名服务器：服务器记录了该域名下注册的所有二级网址IP。这个IP可以是目标服务器，也可以是下一级的域名服务器的IP
  * 授权域名服务器：就是二级，三级转发找到最终主机的服务器。这个服务器可以将收到的域名转成IP
  * 本地域名服务器：主机自己的DNS
* 查询方法：
  * 首先看看本地域名服务器有没有记录要去的网址的IP。有就直接去了
  * 如果没有，本地先问根域名服务器，根域名会将下一个顶级域名服务器的IP给本地
  * 然后再去问顶级域名服务器，顶级域名服务器会将下一级的IP地址发给他
  * 一直到某个服务器的IP地址确实指向主机，查询完成，并更新本地域名服务器的高速缓存

## DHCP(dynamic host configuration protocol)

* discover：首先用户机器广播请求，要求附近的DHCP服务器给他分一个IP出来
* offer ：有DHCP服务器听到了请求，就从IP地址池中返回一个还没有人用的IP地址（包括IP地址，子网掩码，地址使用时长），同时该IP地址设置为已占用。传输的方式是通过用户机器广播的MAC地址找到主机
* request：客户机收到了IP地址，向所有的服务器广播他已经找到了一个IP。广播的内容包括来自哪个服务器的IP，IP信息等。其他服务器得知这个信息后会释放预留的IP
* ack：目标服务器收到了这个信息，返回一个ACK，说这个IP现在可以用了
* 最后客户机进行ARP询问网络上有没有使用这个IP的主机。如果有的话就说明Bad Address，重新开始discover。没问题就开始用了
* 之后客户端再进去网络直接进request环节先问服务器这个地址能不能用，如果ack了接着用，如果nak了就重新discover
* 

## SMTP协议(simple mail transfer protocol)

* 首先客户端与服务器建立TCP
* 然后客户端发送HELO说明自己要开始发了
* 然后客户端发MAIL FROM：xxx说明自己发送的源邮箱地址
* 如果服务器准备好了，回复OK
* 接着客户端发RCPT TO:xxx,说明自己要发到的收件人地址
* 服务器如果能发就返回OK，否则返回No such user here
* 一切OK后，客户端发送DATA，然后开始输入内容
* 结束后输入<回车>,'.',<回车>三个字符结束DATA输入
* 客户端发送QUIT命令关闭TCP连接，服务器返回221同意关闭，连接释放

## SNMP协议：给管理员一个查看网络设备状态的API

* NMS：（Network Management Station,网络管理站），这个是用来监控设备的系统
* MIB（management information database)记录网络设备的数据库
* Agent：在设备上运行SNMP的程序，用来传输设备信息的
* 使用方法
  * SNMP QUERIES:请求信息
  * SNMP SET:设置设备信息
  * SNMP Traps：agent检测到异常或重要事件发送日志
  * SNMP Polling：轮询agent看看还活着么

## FTP：文件传输功能

* 用于给用户向服务器上传输文件的能力
* TCP连接21端口进行控制，数据连接20端口进行数据获取

## MIME协议

在SMTP基础上添加了一套格式，相当于给SMTP加了一个API。MIME会将用户的文件重新编码与解码进行传输，同时添加一些邮件的描述，文件编码等信息，用于兼容非英文的文件。

## 几个缩写

UA：user agent

MTA：message transfer agent

H.323:传流数据的协议

IMAP：允许多个客户端同时连接到同一个邮箱。允许crud，允许高并发

POP：邮局协议，发到邮箱里，服务器调用客户端程序并将内容下载到中断上，然后删除服务器信件

传输过程有几个默认端口

## WWW

world wide web有 以下几个知识点

* URL：用于记录WWW里的每一个文档。每一个文档都有一个唯一标识符URL
* HTTP：应用层协议，确保TCP可靠传输
* HTML：用来画前端的

### URL

URL的形式一般是<协议>://<主机>:<端口>/<路径>。协议可以是HTTP也可以是FTP文件传输

* 用户首先和服务器建立连接
* 用户给服务器发个URL浏览请求
* 服务器将URL解码成文件路径，找到后返回给用户

### HTTP协议

* 有一个进程持续监听80端口，监听到连接请求后就连接
* 服务器收到HTTP请求后，将文件发给浏览器，然后释放连接
  * 如果是持续性连接的话不会释放
* 状态码是发出请求后的结果（类似于ACK回复）